(function(){function q(a){return a.replace(/\-[a-z]/g,function(a){return a[1].toUpperCase()})}function c(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})}function b(a){var b=/\S/;a.each(function(a){for(var g=a.firstChild,l=-1,c;g;)c=g.nextSibling,g.nodeType==3&&!b.test(g.nodeValue)?a.removeChild(g):g.nodeIndex=++l,g=c})}function a(b){return b._xuiEventID?b._xuiEventID:b._xuiEventID=++a.id}function g(a,b){var z;z=s[a]=s[a]||{},a=z;return a[b]=a[b]||[]}function l(b,l,c){var e=a(b),
l=g(e,l),e=function(a){c.call(b,a)===!1&&(a.preventDefault(),a.stopPropagation())};e.guid=c.guid=c.guid||++a.id;e.handler=c;l.push(e);return e}function e(a){return(a||"").replace(y,"")}var d,f=this,h=new String("string"),n=f.document,o=/^#?([\w-]+)$/,p=/^#/,w=/<([\w:]+)/,t=function(a){return[].slice.call(a,0)};try{t(n.documentElement.childNodes)}catch(u){t=function(a){for(var b=[],g=0;a[g];g++)b.push(a[g]);return b}}f.x$=f.xui=d=function(a,b){return new d.fn.find(a,b)};if(![].forEach)Array.prototype.forEach=
function(a,b){var g=this.length||0,l=0;if(typeof a=="function")for(;l<g;l++)a.call(b,this[l],l,this)};d.fn=d.prototype={extend:function(a){for(var b in a)d.fn[b]=a[b]},find:function(a,b){var g=[];if(a)if(b==void 0&&this.length)g=this.each(function(b){g=g.concat(t(d(a,b)))}).reduce(g);else if(b=b||n,typeof a==h)o.test(a)&&b.getElementById&&b.getElementsByTagName?(g=p.test(a)?[b.getElementById(a.substr(1))]:b.getElementsByTagName(a),g[0]==null&&(g=[])):w.test(a)?(b=n.createElement("i"),b.innerHTML=
a,t(b.childNodes).forEach(function(a){g.push(a)})):g=f.Sizzle!==void 0?Sizzle(a,b):b.querySelectorAll(a),g=t(g);else if(a instanceof Array)g=a;else if(a.toString()=="[object NodeList]"||a.toString()=="[object HTMLCollection]")g=t(a);else{if(a.nodeName||a===f)g=[a]}else return this;return this.set(g)},set:function(a){var b=d();b.cache=t(this.length?this:[]);b.length=0;[].push.apply(b,a);return b},reduce:function(a,b){var g=[],a=a||t(this);a.forEach(function(a){g.indexOf(a,0,b)<0&&g.push(a)});return g},
has:function(a){var b=d(a);return this.filter(function(){var a=this,g=null;b.each(function(b){g=g||b==a});return g})},filter:function(a){var b=[];return this.each(function(g,l){a.call(g,l)&&b.push(g)}).set(b)},not:function(a){var b=t(this),g=d(a);return!g.length?this:this.filter(function(a){var l;g.each(function(g){return l=b[a]!=g});return l})},each:function(a){for(var b=0,g=this.length;b<g;++b)if(a.call(this[b],this[b],b,this)===!1)break;return this}};d.fn.find.prototype=d.fn;d.extend=d.fn.extend;
d.extend({html:function(a,g){b(this);if(arguments.length==0){var l=[];this.each(function(a){l.push(a.innerHTML)});return l}arguments.length==1&&arguments[0]!="remove"&&(g=a,a="inner");if(a!="remove"&&g&&g.each!==void 0){if(a=="inner"){var c=n.createElement("p");g.each(function(a){c.appendChild(a)});this.each(function(a){a.innerHTML=c.innerHTML})}else{var e=this;g.each(function(b){e.html(a,b)})}return this}return this.each(function(b){var l,c=0;if(a=="inner")if(typeof g==h||typeof g=="number"){b.innerHTML=
g;b=b.getElementsByTagName("SCRIPT");for(l=b.length;c<l;c++)eval(b[c].text)}else b.innerHTML="",b.appendChild(g);else if(a=="remove")b.parentNode.removeChild(b);else{l=g;c=["outer","top","bottom"].indexOf(a)>-1?b:b.parentNode;typeof l==h?(c=n.createElement("div"),c.innerHTML=l):(c=n.createElement("div"),c.appendChild(l));l=c.childNodes;a=="outer"?b.parentNode.replaceChild(c,b):a=="top"?b.insertBefore(c,b.firstChild):a=="bottom"?b.insertBefore(c,null):a=="before"?b.parentNode.insertBefore(c,b):a==
"after"&&b.parentNode.insertBefore(c,b.nextSibling);for(b=c.parentNode;l.length;)b.insertBefore(l[0],c);b.removeChild(c)}})},attr:function(a,b){if(arguments.length==2)return this.each(function(g){g.tagName=="input"&&a=="value"?g.value=b:g.setAttribute&&(a=="checked"&&(b==""||b==!1||typeof b=="undefined")?g.removeAttribute(a):g.setAttribute(a,b))});else{var g=[];this.each(function(b){b.tagName=="input"&&a=="value"?g.push(b.value):b.getAttribute&&g.push(b.getAttribute(a)||"")});return g}}});"inner outer top bottom remove before after".split(" ").forEach(function(a){d.fn[a]=
function(a){return function(b){return this.html(a,b)}}(a)});d.events={};var s={};d.extend({on:function(b,c,e){return this.each(function(f){if(d.events[b]){var h=a(f),h=g(h,b);e=e||{};e.handler=function(a,g){d.fn.fire.call(d(this),b,g)};h.length||d.events[b].call(f,e)}f.addEventListener(b,l(f,b,c),!1)})},un:function(b,l){return this.each(function(c){for(var e=a(c),d=g(e,b),f=d.length;f--;)if(l===void 0||l.guid===d[f].guid){c.removeEventListener(b,d[f],!1);var h=s[e][b],n=f,o=1,o=h.slice((o||n)+1||
h.length);h.length=n<0?h.length+n:n;h.push.apply(h,o)}s[e][b].length===0&&delete s[e][b];for(var p in s[e])return;delete s[e]})},fire:function(a,b){return this.each(function(g){if(g==n&&!g.dispatchEvent)g=n.documentElement;var l=n.createEvent("HTMLEvents");l.initEvent(a,!0,!0);l.data=b||{};l.eventName=a;g.dispatchEvent(l)})}});"click load submit touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend orientationchange".split(" ").forEach(function(a){d.fn[a]=function(a){return function(b){return b?
this.on(a,b):this.fire(a)}}(a)});d(f).on("load",function(){"onorientationchange"in n.body||function(a,b){d(f).on("resize",function(){var g=f.innerWidth<a&&f.innerHeight>b&&f.innerWidth<f.innerHeight,l=f.innerWidth>a&&f.innerHeight<b&&f.innerWidth>f.innerHeight;if(g||l)f.orientation=g?0:90,d("body").fire("orientationchange"),a=f.innerWidth,b=f.innerHeight})}(f.innerWidth,f.innerHeight)});var r;try{r=!!n.createEvent("TouchEvent").initTouchEvent}catch(v){r=!1}d.touch=r;d.ready=function(a){domReady(a)};
a.id=1;d.extend({tween:function(a,b){var g=function(){var b={};"duration after easing".split(" ").forEach(function(g){a[g]&&(b[g]=a[g],delete a[g])});return b}(a),l=function(a){var b=[],g;if(typeof a!=h){for(g in a)b.push(c(g)+":"+a[g]);b=b.join(";")}else b=a;return b}(a);return this.each(function(a){emile(a,l,g,b)})}});var y=/^(\s|\u00A0)+|(\s|\u00A0)+$/g;d.extend({setStyle:function(a,b){a=q(a);return this.each(function(g){g.style[a]=b})},getStyle:function(a,b){if(b===void 0){var g=[];this.each(function(b){g.push(n.defaultView.getComputedStyle(b,
"").getPropertyValue(c(a)))});return g}else this.each(function(g){b(n.defaultView.getComputedStyle(g,"").getPropertyValue(c(a)))})},addClass:function(a){return this.each(function(b){if(x(a).test(b.className)===!1)b.className=e(b.className+" "+a)})},hasClass:function(a,b){var g=this;return this.length&&function(){var l=!0;g.each(function(g){x(a).test(g.className)?b&&b(g):l=!1});return l}()},removeClass:function(a){a===void 0?this.each(function(a){a.className=""}):this.each(function(b){b.className=
e(b.className.replace(x(a),"$1"))});return this},toggleClass:function(a){return this.each(function(b){b.className=x(a).test(b.className)?e(b.className.replace(x(a),"$1")):e(b.className+" "+a)})},css:function(a){for(var b in a)this.setStyle(b,a[b]);return this}});var A={},x=function(a){var b=A[a];b||(b=RegExp("(^|\\s+)"+a+"(?:\\s+|$)"),A[a]=b);return b};d.extend({xhr:function(a,b,g){function l(){d.readyState==4&&(delete e.xmlHttpRequest,(d.status===0||d.status==200)&&d.handleResp(),/^[45]/.test(d.status)&&
d.handleError())}/^(inner|outer|top|bottom|before|after)$/.test(a)||(g=b,b=a,a="inner");var c=g?g:{};if(typeof g=="function")c={},c.callback=g;var e=this,d=new XMLHttpRequest,g=c.method||"get",f=typeof c.async!="undefined"?c.async:!0,h=c.data||null,n;d.queryString=h;d.open(g,b,f);for(n in c.headers)c.headers.hasOwnProperty(n)&&d.setRequestHeader(n,c.headers[n]);d.setRequestHeader("X-Request-With","XMLHttpRequest");d.handleResp=c.callback!=null?c.callback:function(){e.html(a,d.responseText)};d.handleError=
c.error&&typeof c.error=="function"?c.error:function(){};if(f)d.onreadystatechange=l,this.xmlHttpRequest=d;d.send(h);f||l();return this}});(function(a,b){function g(a,b,l){return(a+(b-a)*l).toFixed(3)}function l(a,b,g){for(var c=2,e,d,f=[],h=[];e=3,d=arguments[c-1],c--;)if(d.substr(0,1)=="r")for(d=d.match(/\d+/g);e--;)f.push(~~d[e]);else for(d.length==4&&(d="#"+d.substr(1,1)+d.substr(1,1)+d.substr(2,1)+d.substr(2,1)+d.substr(3,1)+d.substr(3,1));e--;)f.push(parseInt(d.substr(1+e*2,2),16));for(;e--;)c=
~~(f[e+3]+(f[e]-f[e+3])*g),h.push(c<0?0:c>255?255:c);return"rgb("+h.join(",")+")"}function c(a){var b=parseFloat(a),a=a.replace(/^[\-\d\.]+/,"");return isNaN(b)?{v:a,f:l,u:""}:{v:b,f:g,u:a}}function e(a){var b={},g=f.length,l;d.innerHTML='<div style="'+a+'"></div>';for(a=d.childNodes[0].style;g--;)if(l=a[f[g]])b[f[g]]=c(l);return b}var d=n.createElement("div"),f="backgroundColor borderBottomColor borderBottomWidth borderLeftColor borderLeftWidth borderRightColor borderRightWidth borderSpacing borderTopColor borderTopWidth bottom color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex".split(" ");
b[a]=function(a,b,g,l){var a=typeof a=="string"?n.getElementById(a):a,g=g||{},d=e(b),b=a.currentStyle?a.currentStyle:getComputedStyle(a,null),f,h={},o=+new Date,p=g.duration||200,r=o+p,q,y=g.easing||function(a){return-Math.cos(a*Math.PI)/2+0.5};for(f in d)h[f]=c(b[f]);q=setInterval(function(){var b=+new Date,c=b>r?1:(b-o)/p;for(f in d)a.style[f]=d[f].f(h[f].v,d[f].v,y(c))+d[f].u;b>r&&(clearInterval(q),g.after&&g.after(),l&&setTimeout(l,1))},10)}})("emile",this);(function(a,b){function g(a){for(h=
1;a=l.shift();)a()}var l=[],c,d,e=b.documentElement,f=e.doScroll,h=/^loade|c/.test(b.readyState);b.addEventListener&&b.addEventListener("DOMContentLoaded",d=function(){b.removeEventListener("DOMContentLoaded",d,!1);g()},!1);f&&b.attachEvent("onreadystatechange",c=function(){/^c/.test(b.readyState)&&(b.detachEvent("onreadystatechange",c),g())});a.domReady=f?function(b){self!=top?h?b():l.push(b):function(){try{e.doScroll("left")}catch(g){return setTimeout(function(){a.domReady(b)},50)}b()}()}:function(a){h?
a():l.push(a)}})(this,n)})();(function(q){var c=function(){throw"UID cannot be instantiated";};c._nextID=0;c.get=function(){return c._nextID++};q.UID=c})(window);
(function(q){var c=function(){throw"Ticker cannot be instantiated.";};c._listeners=[];c._pauseable=[];c._paused=!1;c._inited=!1;c._startTime=0;c._pausedTime=0;c._ticks=0;c._pausedTickers=0;c._interval=50;c._intervalID=null;c._lastTime=0;c._times=[];c.addListener=function(b,a){if(!c._inited)c._inited=!0,c._startTime=c._getTime(),c._times.push(0),c.setInterval(c._interval);this.removeListener(b);c._pauseable[c._listeners.length]=a==null?!0:a;c._listeners.push(b)};c.removeListener=function(b){c._listeners!=
null&&(b=c._listeners.indexOf(b),b!=-1&&(c._listeners.splice(b,1),c._pauseable.splice(b,1)))};c.removeAllListeners=function(){c._listeners=[];c._pauseable=[]};c.setInterval=function(b){c._intervalID!=null&&clearInterval(c._intervalID);c._lastTime=c.getTime(!1);c._interval=b;c._intervalID=setInterval(c._tick,b)};c.getInterval=function(){return c._interval};c.getFPS=function(){return 1E3/c._interval};c.setFPS=function(b){c.setInterval(1E3/b)};c.getMeasuredFPS=function(b){if(c._times.length<2)return-1;
b==null&&(b=c.getFPS()>>1);b=Math.min(c._times.length-1,b);return 1E3/((c._times[0]-c._times[b])/b)};c.setPaused=function(b){c._paused=b};c.getPaused=function(){return c._paused};c.getTime=function(b){return c._getTime()-c._startTime-(b?c._pausedTime:0)};c.getTicks=function(b){return c._ticks-(b?c._pausedTickers:0)};c._tick=function(){c._ticks++;var b=c.getTime(!1),a=b-c._lastTime,g=c._paused;g&&(c._pausedTickers++,c._pausedTime+=a);c._lastTime=b;for(var l=c._pauseable,e=c._listeners.slice(),d=e?
e.length:0,f=0;f<d;f++){var h=l[f],n=e[f];n==null||g&&h||n.tick==null||n.tick(a)}c._times.unshift(b);c._times.length>100&&c._times.pop()};c._getTime=function(){return(new Date).getTime()};q.Ticker=c})(window);
(function(q){var c=function(a,b,l){this.initialize(a,b,l)},b=c.prototype;b.stageX=0;b.stageY=0;b.type=null;b.nativeEvent=null;b.onMouseMove=null;b.onMouseUp=null;b.target=null;b.initialize=function(a,b,l,c,d){this.type=a;this.stageX=b;this.stageY=l;this.target=c;this.nativeEvent=d};b.clone=function(){return new c(this.type,this.stageX,this.stageY,this.target,this.nativeEvent)};b.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"};q.MouseEvent=
c})(window);
(function(q){var c=function(a,b,l,c,d,f){this.initialize(a,b,l,c,d,f)},b=c.prototype;c.identity=null;c.DEG_TO_RAD=Math.PI/180;b.a=1;b.b=0;b.c=0;b.d=1;b.tx=0;b.ty=0;b.alpha=1;b.shadow=null;b.compositeOperation=null;b.initialize=function(a,b,l,c,d,f){if(a!=null)this.a=a;this.b=b||0;this.c=l||0;if(c!=null)this.d=c;this.tx=d||0;this.ty=f||0};b.prepend=function(a,b,l,c,d,f){var h=this.tx;if(a!=1||b!=0||l!=0||c!=1){var n=this.a,o=this.c;this.a=n*a+this.b*l;this.b=n*b+this.b*c;this.c=o*a+this.d*l;this.d=
o*b+this.d*c}this.tx=h*a+this.ty*l+d;this.ty=h*b+this.ty*c+f};b.append=function(a,b,l,c,d,f){var h=this.a,n=this.b,o=this.c,p=this.d;this.a=a*h+b*o;this.b=a*n+b*p;this.c=l*h+c*o;this.d=l*n+c*p;this.tx=d*h+f*o+this.tx;this.ty=d*n+f*p+this.ty};b.prependMatrix=function(a){this.prepend(a.a,a.b,a.c,a.d,a.tx,a.ty);this.prependProperties(a.alpha,a.shadow,a.compositeOperation)};b.appendMatrix=function(a){this.append(a.a,a.b,a.c,a.d,a.tx,a.ty);this.appendProperties(a.alpha,a.shadow,a.compositeOperation)};
b.prependTransform=function(a,b,l,e,d,f,h,n,o){if(d%360)var p=d*c.DEG_TO_RAD,d=Math.cos(p),p=Math.sin(p);else d=1,p=0;if(n||o)this.tx-=n,this.ty-=o;f||h?(f*=c.DEG_TO_RAD,h*=c.DEG_TO_RAD,this.prepend(d*l,p*l,-p*e,d*e,0,0),this.prepend(Math.cos(h),Math.sin(h),-Math.sin(f),Math.cos(f),a,b)):this.prepend(d*l,p*l,-p*e,d*e,a,b)};b.appendTransform=function(a,b,l,e,d,f,h,n,o){if(d%360)var p=d*c.DEG_TO_RAD,d=Math.cos(p),p=Math.sin(p);else d=1,p=0;f||h?(f*=c.DEG_TO_RAD,h*=c.DEG_TO_RAD,this.append(Math.cos(h),
Math.sin(h),-Math.sin(f),Math.cos(f),a,b),this.append(d*l,p*l,-p*e,d*e,0,0)):this.append(d*l,p*l,-p*e,d*e,a,b);if(n||o)this.tx-=n*this.a+o*this.c,this.ty-=n*this.b+o*this.d};b.rotate=function(a){var b=Math.cos(a),a=Math.sin(a),l=this.a,c=this.c,d=this.tx;this.a=l*b-this.b*a;this.b=l*a+this.b*b;this.c=c*b-this.d*a;this.d=c*a+this.d*b;this.tx=d*b-this.ty*a;this.ty=d*a+this.ty*b};b.skew=function(a,b){a*=c.DEG_TO_RAD;b*=c.DEG_TO_RAD;this.append(Math.cos(b),Math.sin(b),-Math.sin(a),Math.cos(a),0,0)};b.scale=
function(a,b){this.a*=a;this.d*=b;this.tx*=a;this.ty*=b};b.translate=function(a,b){this.tx+=a;this.ty+=b};b.identity=function(){this.alpha=this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;this.shadow=this.compositeOperation=null};b.invert=function(){var a=this.a,b=this.b,l=this.c,c=this.d,d=this.tx,f=a*c-b*l;this.a=c/f;this.b=-b/f;this.c=-l/f;this.d=a/f;this.tx=(l*this.ty-c*d)/f;this.ty=-(a*this.ty-b*d)/f};b.decompose=function(a){a==null&&(a={});a.x=this.tx;a.y=this.ty;a.scaleX=Math.sqrt(this.a*this.a+
this.b*this.b);a.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var b=Math.atan2(-this.c,this.d),l=Math.atan2(this.b,this.a);b==l?(a.rotation=l/c.DEG_TO_RAD,this.a<0&&this.d>=0&&(a.rotation+=a.rotation<=0?180:-180),a.skewX=a.skewY=0):(a.skewX=b/c.DEG_TO_RAD,a.skewY=l/c.DEG_TO_RAD);return a};b.reinitialize=function(a,b,c,e,d,f,h,n,o){this.initialize(a,b,c,e,d,f);this.alpha=h||1;this.shadow=n;this.compositeOperation=o;return this};b.appendProperties=function(a,b,c){this.alpha*=a;this.shadow=b||this.shadow;
this.compositeOperation=c||this.compositeOperation};b.prependProperties=function(a,b,c){this.alpha*=a;this.shadow=this.shadow||b;this.compositeOperation=this.compositeOperation||c};b.clone=function(){var a=new c(this.a,this.b,this.c,this.d,this.tx,this.ty);a.shadow=this.shadow;a.alpha=this.alpha;a.compositeOperation=this.compositeOperation;return a};b.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"};c.identity=new c(1,0,0,
1,0,0);q.Matrix2D=c})(window);(function(q){var c=function(a,b){this.initialize(a,b)},b=c.prototype;b.x=0;b.y=0;b.initialize=function(a,b){this.x=a==null?0:a;this.y=b==null?0:b};b.clone=function(){return new c(this.x,this.y)};b.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"};q.Point=c})(window);
(function(q){var c=function(a,b,c,e){this.initialize(a,b,c,e)},b=c.prototype;b.x=0;b.y=0;b.width=0;b.height=0;b.initialize=function(a,b,c,e){this.x=a==null?0:a;this.y=b==null?0:b;this.width=c==null?0:c;this.height=e==null?0:e};b.clone=function(){return new c(this.x,this.y,this.width,this.height)};b.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"};q.Rectangle=c})(window);
(function(q){var c=function(a,b,c,e){this.initialize(a,b,c,e)},b=c.prototype;c.identity=null;b.color=null;b.offsetX=0;b.offsetY=0;b.blur=0;b.initialize=function(a,b,c,e){this.color=a;this.offsetX=b;this.offsetY=c;this.blur=e};b.toString=function(){return"[Shadow]"};b.clone=function(){return new c(this.color,this.offsetX,this.offsetY,this.blur)};c.identity=new c(null,0,0,0);q.Shadow=c})(window);
(function(q){var c=function(a,b,c,e){this.initialize(a,b,c,e)},b=c.prototype;b.image=null;b.frameWidth=0;b.frameHeight=0;b.frameData=null;b.loop=!0;b.totalFrames=0;b.initialize=function(a,b,c,e){this.image=a;this.frameWidth=b;this.frameHeight=c;this.frameData=e};b.toString=function(){return"[SpriteSheet]"};b.clone=function(){var a=new c(this.image,this.frameWidth,this.frameHeight,this.frameData);a.loop=this.loop;a.totalFrames=this.totalFrames;return a};q.SpriteSheet=c})(window);
(function(q){function c(a,b){this.f=a;this.params=b}c.prototype.exec=function(a){this.f.apply(a,this.params)};var b=function(){this.initialize()},a=b.prototype;b.getRGB=function(a,b,c,d){a!=null&&c==null&&(d=b,c=a&255,b=a>>8&255,a=a>>16&255);return d==null?"rgb("+a+","+b+","+c+")":"rgba("+a+","+b+","+c+","+d+")"};b.getHSL=function(a,b,c,d){return d==null?"hsl("+a%360+","+b+"%,"+c+"%)":"hsla("+a%360+","+b+"%,"+c+"%,"+d+")"};b.STROKE_CAPS_MAP=["butt","round","square"];b.STROKE_JOINTS_MAP=["miter","round",
"bevel"];b._ctx=document.createElement("canvas").getContext("2d");b.beginCmd=new c(b._ctx.beginPath,[]);b.fillCmd=new c(b._ctx.fill,[]);b.strokeCmd=new c(b._ctx.stroke,[]);a._strokeInstructions=null;a._strokeStyleInstructions=null;a._fillInstructions=null;a._instructions=null;a._oldInstructions=null;a._activeInstructions=null;a._active=!1;a._dirty=!1;a.initialize=function(){this.clear();this._ctx=b._ctx};a.draw=function(a){this._dirty&&this._updateInstructions();for(var b=this._instructions,c=0,d=
b.length;c<d;c++)b[c].exec(a)};a.moveTo=function(a,b){this._activeInstructions.push(new c(this._ctx.moveTo,[a,b]));return this};a.lineTo=function(a,b){this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.lineTo,[a,b]));return this};a.arcTo=function(a,b,e,d,f){this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.arcTo,[a,b,e,d,f]));return this};a.arc=function(a,b,e,d,f,h){this._dirty=this._active=!0;h==null&&(h=!1);this._activeInstructions.push(new c(this._ctx.arc,
[a,b,e,d,f,h]));return this};a.quadraticCurveTo=function(a,b,e,d){this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.quadraticCurveTo,[a,b,e,d]));return this};a.bezierCurveTo=function(a,b,e,d,f,h){this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.bezierCurveTo,[a,b,e,d,f,h]));return this};a.rect=function(a,b,e,d){this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.rect,[a,b,e,d]));return this};a.closePath=function(){if(this._active)this._dirty=
!0,this._activeInstructions.push(new c(this._ctx.closePath,[]));return this};a.clear=function(){this._instructions=[];this._oldInstructions=[];this._activeInstructions=[];this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=null;this._active=this._dirty=!1;return this};a.beginFill=function(a){this._active&&this._newPath();this._fillInstructions=a?[new c(this._setProp,["fillStyle",a])]:null;return this};a.beginLinearGradientFill=function(a,b,e,d,f,h){this._active&&this._newPath();
e=this._ctx.createLinearGradient(e,d,f,h);d=0;for(f=a.length;d<f;d++)e.addColorStop(b[d],a[d]);this._fillInstructions=[new c(this._setProp,["fillStyle",e])];return this};a.beginRadialGradientFill=function(a,b,e,d,f,h,n,o){this._active&&this._newPath();e=this._ctx.createRadialGradient(e,d,f,h,n,o);d=0;for(f=a.length;d<f;d++)e.addColorStop(b[d],a[d]);this._fillInstructions=[new c(this._setProp,["fillStyle",e])];return this};a.beginBitmapFill=function(a,b){this._active&&this._newPath();var e=this._ctx.createPattern(a,
b||"");this._fillInstructions=[new c(this._setProp,["fillStyle",e])];return this};a.endFill=function(){this.beginFill(null);return this};a.setStrokeStyle=function(a,l,e,d){this._active&&this._newPath();this._strokeStyleInstructions=[new c(this._setProp,["lineWidth",a==null?"1":a]),new c(this._setProp,["lineCap",l==null?"butt":isNaN(l)?l:b.STROKE_CAPS_MAP[l]]),new c(this._setProp,["lineJoin",e==null?"miter":isNaN(e)?e:b.STROKE_JOINTS_MAP[e]]),new c(this._setProp,["miterLimit",d==null?"10":d])];return this};
a.beginStroke=function(a){this._active&&this._newPath();this._strokeInstructions=a?[new c(this._setProp,["strokeStyle",a])]:null;return this};a.beginLinearGradientStroke=function(a,b,e,d,f,h){this._active&&this._newPath();e=this._ctx.createLinearGradient(e,d,f,h);d=0;for(f=a.length;d<f;d++)e.addColorStop(b[d],a[d]);this._strokeInstructions=[new c(this._setProp,["strokeStyle",e])];return this};a.beginRadialGradientStroke=function(a,b,e,d,f,h,n,o){this._active&&this._newPath();e=this._ctx.createRadialGradient(e,
d,f,h,n,o);d=0;for(f=a.length;d<f;d++)e.addColorStop(b[d],a[d]);this._strokeInstructions=[new c(this._setProp,["strokeStyle",e])];return this};a.beginBitmapStroke=function(a,b){this._active&&this._newPath();var e=this._ctx.createPattern(a,b||"");this._strokeInstructions=[new c(this._setProp,["strokeStyle",e])];return this};a.endStroke=function(){this.beginStroke(null);return this};a.curveTo=a.quadraticCurveTo;a.drawRect=a.rect;a.drawRoundRect=function(a,b,c,d,f){this.drawRoundRectComplex(a,b,c,d,
f,f,f,f);return this};a.drawRoundRectComplex=function(a,b,e,d,f,h,n,o){this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.moveTo,[a+f,b]),new c(this._ctx.lineTo,[a+e-h,b]),new c(this._ctx.arc,[a+e-h,b+h,h,-Math.PI/2,0,!1]),new c(this._ctx.lineTo,[a+e,b+d-n]),new c(this._ctx.arc,[a+e-n,b+d-n,n,0,Math.PI/2,!1]),new c(this._ctx.lineTo,[a+o,b+d]),new c(this._ctx.arc,[a+o,b+d-o,o,Math.PI/2,Math.PI,!1]),new c(this._ctx.lineTo,[a,b+f]),new c(this._ctx.arc,[a+f,b+f,f,Math.PI,Math.PI*
3/2,!1]));return this};a.drawCircle=function(a,b,c){this.arc(a,b,c,0,Math.PI*2);return this};a.drawEllipse=function(a,b,e,d){this._dirty=this._active=!0;var f=e/2*0.5522848,h=d/2*0.5522848,n=a+e,o=b+d,e=a+e/2,d=b+d/2;this._activeInstructions.push(new c(this._ctx.moveTo,[a,d]),new c(this._ctx.bezierCurveTo,[a,d-h,e-f,b,e,b]),new c(this._ctx.bezierCurveTo,[e+f,b,n,d-h,n,d]),new c(this._ctx.bezierCurveTo,[n,d+h,e+f,o,e,o]),new c(this._ctx.bezierCurveTo,[e-f,o,a,d+h,a,d]));return this};a.drawPolyStar=
function(a,b,e,d,f,h){this._dirty=this._active=!0;f==null&&(f=0);f=1-f;h==null?h=0:h/=180/Math.PI;var n=Math.PI/d;this._activeInstructions.push(new c(this._ctx.moveTo,[a+Math.cos(h)*e,b+Math.sin(h)*e]));for(var o=0;o<d;o++)h+=n,f!=1&&this._activeInstructions.push(new c(this._ctx.lineTo,[a+Math.cos(h)*e*f,b+Math.sin(h)*e*f])),h+=n,this._activeInstructions.push(new c(this._ctx.lineTo,[a+Math.cos(h)*e,b+Math.sin(h)*e]));return this};a.clone=function(){var a=new b;a._instructions=this._instructions.slice();
a._activeInstructions=this._activeInstructions.slice();a._oldInstructions=this._oldInstructions.slice();if(this._fillInstructions)a._fillInstructions=this._fillInstructions.slice();if(this._strokeInstructions)a._strokeInstructions=this._strokeInstructions.slice();if(this._strokeStyleInstructions)a._strokeStyleInstructions=this._strokeStyleInstructions.slice();a._active=this._active;a._dirty=this._dirty;return a};a.toString=function(){return"[Graphics]"};a.mt=a.moveTo;a.lt=a.lineTo;a.at=a.arcTo;a.bt=
a.bezierCurveTo;a.qt=a.quadraticCurveTo;a.a=a.arc;a.r=a.rect;a.cp=a.closePath;a.c=a.clear;a.f=a.beginFill;a.lf=a.beginLinearGradientFill;a.rf=a.beginRadialGradientFill;a.bf=a.beginBitmapFill;a.ef=a.endFill;a.ss=a.setStrokeStyle;a.s=a.beginStroke;a.ls=a.beginLinearGradientStroke;a.rs=a.beginRadialGradientStroke;a.bs=a.beginBitmapStroke;a.es=a.endStroke;a.dr=a.drawRect;a.rr=a.drawRoundRect;a.rc=a.drawRoundRectComplex;a.dc=a.drawCircle;a.de=a.drawEllipse;a.dp=a.drawPolyStar;a._updateInstructions=function(){this._instructions=
this._oldInstructions.slice();this._instructions.push(b.beginCmd);this._fillInstructions&&this._instructions.push.apply(this._instructions,this._fillInstructions);this._strokeInstructions&&(this._instructions.push.apply(this._instructions,this._strokeInstructions),this._strokeStyleInstructions&&this._instructions.push.apply(this._instructions,this._strokeStyleInstructions));this._instructions.push.apply(this._instructions,this._activeInstructions);this._fillInstructions&&this._instructions.push(b.fillCmd);
this._strokeInstructions&&this._instructions.push(b.strokeCmd)};a._newPath=function(){this._dirty&&this._updateInstructions();this._oldInstructions=this._instructions;this._activeInstructions=[];this._active=this._dirty=!1};a._setProp=function(a,b){this[a]=b};q.Graphics=b})(window);
(function(q){var c=function(){this.initialize()},b=c.prototype;c.suppressCrossDomainErrors=!1;c._hitTestCanvas=document.createElement("canvas");c._hitTestCanvas.width=c._hitTestCanvas.height=1;c._hitTestContext=c._hitTestCanvas.getContext("2d");b.alpha=1;b.cacheCanvas=null;b.id=-1;b.mouseEnabled=!0;b.name=null;b.parent=null;b.regX=0;b.regY=0;b.rotation=0;b.scaleX=1;b.scaleY=1;b.skewX=0;b.skewY=0;b.shadow=null;b.visible=!0;b.x=0;b.y=0;b.compositeOperation=null;b.snapToPixel=!1;b.onPress=null;b.onClick=
null;b.onDoubleClick=null;b.onMouseOver=null;b.onMouseOut=null;b.filters=null;b._cacheOffsetX=0;b._cacheOffsetY=0;b._matrix=null;b.initialize=function(){this.id=UID.get();this._matrix=new Matrix2D};b.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0};b.draw=function(a,b){if(b||!this.cacheCanvas)return!1;a.drawImage(this.cacheCanvas,this._cacheOffsetX,this._cacheOffsetY);return!0};b.cache=function(a,b,c,e){if(this.cacheCanvas==null)this.cacheCanvas=document.createElement("canvas");
var d=this.cacheCanvas.getContext("2d");this.cacheCanvas.width=c;this.cacheCanvas.height=e;d.setTransform(1,0,0,1,-a,-b);d.clearRect(0,0,c+1,e+1);this.draw(d,!0);this._cacheOffsetX=a;this._cacheOffsetY=b;this._applyFilters()};b.updateCache=function(a){if(this.cacheCanvas==null)throw"cache() must be called before updateCache()";var b=this.cacheCanvas.getContext("2d");b.setTransform(1,0,0,1,-this._cacheOffsetX,-this._cacheOffsetY);a?b.globalCompositeOperation=a:b.clearRect(0,0,this.cacheCanvas.width+
1,this.cacheCanvas.height+1);this.draw(b,!0);if(a)b.globalCompositeOperation="source-over";this._applyFilters()};b.uncache=function(){this.cacheCanvas=null;this._cacheOffsetX=this._cacheOffsetY=0};b.getStage=function(){for(var a=this;a.parent;)a=a.parent;return a instanceof Stage?a:null};b.localToGlobal=function(a,b){var c=this.getConcatenatedMatrix(this._matrix);if(c==null)return null;c.append(1,0,0,1,a,b);return new Point(c.tx,c.ty)};b.globalToLocal=function(a,b){var c=this.getConcatenatedMatrix(this._matrix);
if(c==null)return null;c.invert();c.append(1,0,0,1,a,b);return new Point(c.tx,c.ty)};b.localToLocal=function(a,b,c){a=this.localToGlobal(a,b);return c.globalToLocal(a.x,a.y)};b.setTransform=function(a,b,c,e,d,f,h,n,o){this.x=a||0;this.y=b||0;this.scaleX=c==null?1:c;this.scaleY=e==null?1:e;this.rotation=d||0;this.skewX=f||0;this.skewY=h||0;this.regX=n||0;this.regY=o||0};b.getConcatenatedMatrix=function(a){a?a.identity():a=new Matrix2D;for(var b=this;b!=null;)a.prependTransform(b.x,b.y,b.scaleX,b.scaleY,
b.rotation,b.skewX,b.skewY,b.regX,b.regY),a.prependProperties(b.alpha,b.shadow,b.compositeOperation),b=b.parent;return a};b.hitTest=function(a,b){var l=c._hitTestContext,e=c._hitTestCanvas;l.setTransform(1,0,0,1,-a,-b);this.draw(l);l=this._testHit(l);e.width=0;e.width=1;return l};b.clone=function(){var a=new c;this.cloneProps(a);return a};b.toString=function(){return"[DisplayObject (name="+this.name+")]"};b.cloneProps=function(a){a.alpha=this.alpha;a.name=this.name;a.regX=this.regX;a.regY=this.regY;
a.rotation=this.rotation;a.scaleX=this.scaleX;a.scaleY=this.scaleY;a.shadow=this.shadow;a.skewX=this.skewX;a.skewY=this.skewY;a.visible=this.visible;a.x=this.x;a.y=this.y;a.mouseEnabled=this.mouseEnabled;a.compositeOperation=this.compositeOperation};b.applyShadow=function(a,b){b=b||Shadow.identity;a.shadowColor=b.color;a.shadowOffsetX=b.offsetX;a.shadowOffsetY=b.offsetY;a.shadowBlur=b.blur};b._testHit=function(a){try{var b=a.getImageData(0,0,1,1).data[3]>1}catch(l){if(!c.suppressCrossDomainErrors)throw"An error has occured. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.";
}return b};b._applyFilters=function(){if(this.filters&&this.filters.length!=0&&this.cacheCanvas)for(var a=this.filters.length,b=this.cacheCanvas.getContext("2d"),c=this.cacheCanvas.width,e=this.cacheCanvas.height,d=0;d<a;d++)this.filters[d].applyFilter(b,0,0,c,e)};q.DisplayObject=c})(window);
(function(q){var c=function(){this.initialize()},b=c.prototype=new DisplayObject;b.children=null;b.DisplayObject_initialize=b.initialize;b.initialize=function(){this.DisplayObject_initialize();this.children=[]};b.isVisible=function(){return this.visible&&this.alpha>0&&this.children.length&&this.scaleX!=0&&this.scaleY!=0};b.DisplayObject_draw=b.draw;b.draw=function(a,b,l){var e=Stage._snapToPixelEnabled;if(this.DisplayObject_draw(a,b))return!0;for(var l=l||this._matrix.reinitialize(1,0,0,1,0,0,this.alpha,
this.shadow,this.compositeOperation),b=this.children.length,d=this.children.slice(0),f=0;f<b;f++){var h=d[f];h.tick&&h.tick();if(h.isVisible()){var n=!1,o=h._matrix.reinitialize(l.a,l.b,l.c,l.d,l.tx,l.ty,l.alpha,l.shadow,l.compositeOperation);o.appendTransform(h.x,h.y,h.scaleX,h.scaleY,h.rotation,h.skewX,h.skewY,h.regX,h.regY);o.appendProperties(h.alpha,h.shadow,h.compositeOperation);if(!(h instanceof c&&h.cacheCanvas==null))e&&h.snapToPixel&&o.a==1&&o.b==0&&o.c==0&&o.d==1?a.setTransform(o.a,o.b,
o.c,o.d,o.tx+0.5|0,o.ty+0.5|0):a.setTransform(o.a,o.b,o.c,o.d,o.tx,o.ty),a.globalAlpha=o.alpha,a.globalCompositeOperation=o.compositeOperation||"source-over",(n=o.shadow)&&this.applyShadow(a,n);h.draw(a,!1,o);n&&this.applyShadow(a)}}return!0};b.addChild=function(a){var b=arguments.length;if(b>1){for(var c=0;c<b;c++)this.addChild(arguments[c]);return arguments[b-1]}a.parent&&a.parent.removeChild(a);a.parent=this;this.children.push(a);return a};b.addChildAt=function(a,b){var c=arguments.length;if(c>
2){for(var b=arguments[e-1],e=0;e<c-1;e++)this.addChildAt(arguments[e],b+e);return arguments[c-2]}a.parent&&a.parent.removeChild(a);a.parent=this;this.children.splice(b,0,a);return a};b.removeChild=function(a){var b=arguments.length;if(b>1){for(var c=!0,e=0;e<b;e++)c=c&&this.removeChild(arguments[e]);return c}return this.removeChildAt(this.children.indexOf(a))};b.removeChildAt=function(a){var b=arguments.length;if(b>1){for(var c=[],e=0;e<b;e++)c[e]=arguments[e];c.sort(function(a,b){return b-a});for(var d=
!0,e=0;e<b;e++)d=d&&this.removeChildAt(c[e]);return d}if(a<0||a>this.children.length-1)return!1;b=this.children[a];if(b!=null)b.parent=null;this.children.splice(a,1);return!0};b.removeAllChildren=function(){for(;this.children.length;)this.removeChildAt(0)};b.getChildAt=function(a){return this.children[a]};b.sortChildren=function(a){this.children.sort(a)};b.getChildIndex=function(a){return this.children.indexOf(a)};b.getNumChildren=function(){return this.children.length};b.contains=function(a){for(;a;){if(a==
this)return!0;a=a.parent}return!1};b.hitTest=function(a,b){return this.getObjectUnderPoint(a,b)!=null};b.getObjectsUnderPoint=function(a,b){var c=[],e=this.localToGlobal(a,b);this._getObjectsUnderPoint(e.x,e.y,c);return c};b.getObjectUnderPoint=function(a,b){var c=this.localToGlobal(a,b);return this._getObjectsUnderPoint(c.x,c.y)};b.clone=function(a){var b=new c;this.cloneProps(b);if(a)for(var l=b.children=[],e=0,d=this.children.length;e<d;e++){var f=this.children[e].clone(a);f.parent=b;l.push(f)}return b};
b.toString=function(){return"[Container (name="+this.name+")]"};b._getObjectsUnderPoint=function(a,b,l,e){var d=DisplayObject._hitTestContext,f=DisplayObject._hitTestCanvas,h=this._matrix,n=e&1&&(this.onPress||this.onClick||this.onDoubleClick)||e&2&&(this.onMouseOver||this.onMouseOut);if(this.cacheCanvas)if(this.getConcatenatedMatrix(h),d.setTransform(h.a,h.b,h.c,h.d,h.tx-a,h.ty-b),d.globalAlpha=h.alpha,this.draw(d),this._testHit(d)){if(f.width=0,f.width=1,n)return this}else return null;for(var o=
this.children.length-1;o>=0;o--){var p=this.children[o];if(p.isVisible()&&p.mouseEnabled)if(p instanceof c)if(n){if(p._getObjectsUnderPoint(a,b))return this}else{if(p=p._getObjectsUnderPoint(a,b,l,e),!l&&p)return p}else if(!e||n||e&1&&(p.onPress||p.onClick||p.onDoubleClick)||e&2&&(p.onMouseOver||p.onMouseOut))if(p.getConcatenatedMatrix(h),d.setTransform(h.a,h.b,h.c,h.d,h.tx-a,h.ty-b),d.globalAlpha=h.alpha,p.draw(d),this._testHit(d))if(f.width=0,f.width=1,n)return this;else if(l)l.push(p);else return p}return null};
q.Container=c})(window);
(function(q){var c=function(a){this.initialize(a)},b=c.prototype=new Container;c._snapToPixelEnabled=!1;b.autoClear=!0;b.canvas=null;b.mouseX=null;b.mouseY=null;b.onMouseMove=null;b.onMouseUp=null;b.onMouseDown=null;b.snapToPixelEnabled=!1;b.mouseInBounds=!1;b._activeMouseEvent=null;b._activeMouseTarget=null;b._mouseOverIntervalID=null;b._mouseOverX=0;b._mouseOverY=0;b._mouseOverTarget=null;b.Container_initialize=b.initialize;b.initialize=function(a){this.Container_initialize();this.canvas=a;this._enableMouseEvents(!0)};
b.update=function(){if(this.canvas)this.autoClear&&this.clear(),c._snapToPixelEnabled=this.snapToPixelEnabled,this.draw(this.canvas.getContext("2d"),!1,this.getConcatenatedMatrix(this._matrix))};b.tick=b.update;b.clear=function(){if(this.canvas){var a=this.canvas.getContext("2d");a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,this.canvas.width,this.canvas.height)}};b.toDataURL=function(a,b){b||(b="image/png");var c=this.canvas.getContext("2d"),e=this.canvas.width,d=this.canvas.height,f;if(a){f=c.getImageData(0,
0,e,d);var h=c.globalCompositeOperation;c.globalCompositeOperation="destination-over";c.fillStyle=a;c.fillRect(0,0,e,d)}var n=this.canvas.toDataURL(b);if(a)c.clearRect(0,0,e,d),c.putImageData(f,0,0),c.globalCompositeOperation=h;return n};b.enableMouseOver=function(a){if(this._mouseOverIntervalID)clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null;if(!(a<=0)){var b=this;this._mouseOverIntervalID=setInterval(function(){b._testMouseOver()},1E3/Math.min(50,a));this._mouseOverX=NaN;
this._mouseOverTarget=null}};b.clone=function(){var a=new c(null);this.cloneProps(a);return a};b.toString=function(){return"[Stage (name="+this.name+")]"};b._enableMouseEvents=function(){var a=this,b=q.addEventListener?q:document;b.addEventListener("mouseup",function(b){a._handleMouseUp(b)},!1);b.addEventListener("mousemove",function(b){a._handleMouseMove(b)},!1);b.addEventListener("dblclick",function(b){a._handleDoubleClick(b)},!1);this.canvas.addEventListener("mousedown",function(b){a._handleMouseDown(b)},
!1)};b._handleMouseMove=function(a){if(this.canvas){if(!a)a=q.event;var b=this.mouseInBounds;this._updateMousePosition(a.pageX,a.pageY);if(b||this.mouseInBounds){a=new MouseEvent("onMouseMove",this.mouseX,this.mouseY,this,a);if(this.onMouseMove)this.onMouseMove(a);if(this._activeMouseEvent&&this._activeMouseEvent.onMouseMove)this._activeMouseEvent.onMouseMove(a)}}else this.mouseX=this.mouseY=null};b._updateMousePosition=function(a,b){var c=this.canvas;do a-=c.offsetLeft,b-=c.offsetTop;while(c=c.offsetParent);
if(this.mouseInBounds=a>=0&&b>=0&&a<this.canvas.width&&b<this.canvas.height)this.mouseX=a,this.mouseY=b};b._handleMouseUp=function(a){var b=new MouseEvent("onMouseUp",this.mouseX,this.mouseY,this,a);if(this.onMouseUp)this.onMouseUp(b);if(this._activeMouseEvent&&this._activeMouseEvent.onMouseUp)this._activeMouseEvent.onMouseUp(b);if(this._activeMouseTarget&&this._activeMouseTarget.onClick&&this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0,this._mouseOverIntervalID?3:1)==this._activeMouseTarget)this._activeMouseTarget.onClick(new MouseEvent("onClick",
this.mouseX,this.mouseY,this._activeMouseTarget,a));this._activeMouseEvent=this._activeMouseTarget=null};b._handleMouseDown=function(a){if(this.onMouseDown)this.onMouseDown(new MouseEvent("onMouseDown",this.mouseX,this.mouseY,this,a));var b=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,this._mouseOverIntervalID?3:1);if(b){if(b.onPress instanceof Function&&(a=new MouseEvent("onPress",this.mouseX,this.mouseY,b,a),b.onPress(a),a.onMouseMove||a.onMouseUp))this._activeMouseEvent=a;this._activeMouseTarget=
b}};b._testMouseOver=function(){if(!(this.mouseX==this._mouseOverX&&this.mouseY==this._mouseOverY&&this.mouseInBounds)){var a=null;if(this.mouseInBounds)a=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,3),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY;if(this._mouseOverTarget!=a){if(this._mouseOverTarget&&this._mouseOverTarget.onMouseOut)this._mouseOverTarget.onMouseOut(new MouseEvent("onMouseOut",this.mouseX,this.mouseY,this._mouseOverTarget));if(a&&a.onMouseOver)a.onMouseOver(new MouseEvent("onMouseOver",
this.mouseX,this.mouseY,a));this._mouseOverTarget=a}}};b._handleDoubleClick=function(a){if(this.onDoubleClick)this.onDoubleClick(new MouseEvent("onDoubleClick",this.mouseX,this.mouseY,this,a));var b=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,this._mouseOverIntervalID?3:1);if(b&&b.onDoubleClick instanceof Function)b.onDoubleClick(new MouseEvent("onPress",this.mouseX,this.mouseY,b,a))};q.Stage=c})(window);
(function(q){var c=function(a){this.initialize(a)},b=c.prototype=new DisplayObject;b.image=null;b.snapToPixel=!0;b.DisplayObject_initialize=b.initialize;b.initialize=function(a){this.DisplayObject_initialize();typeof a=="string"?(this.image=new Image,this.image.src=a):this.image=a};b.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.image&&(this.image.complete||this.image.getContext)};b.DisplayObject_draw=b.draw;b.draw=function(a,b){if(this.DisplayObject_draw(a,
b))return!0;a.drawImage(this.image,0,0);return!0};b.clone=function(){var a=new c(this.image);this.cloneProps(a);return a};b.toString=function(){return"[Bitmap (name="+this.name+")]"};q.Bitmap=c})(window);
(function(q){var c=function(a){this.initialize(a)},b=c.prototype=new DisplayObject;b.callback=null;b.currentFrame=-1;b.currentSequence=null;b.currentEndFrame=null;b.currentStartFrame=null;b.nextSequence=null;b.paused=!1;b.spriteSheet=null;b.snapToPixel=!0;b.DisplayObject_initialize=b.initialize;b.initialize=function(a){this.DisplayObject_initialize();this.spriteSheet=a};b.isVisible=function(){var a=this.spriteSheet?this.spriteSheet.image:null;return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=
0&&a&&this.currentFrame>=0&&(a.complete||a.getContext)};b.DisplayObject_draw=b.draw;b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;var c=this.spriteSheet.image,e=this.spriteSheet.frameWidth,d=this.spriteSheet.frameHeight,f=c.width/e|0,h=c.height/d|0;if(this.currentEndFrame!=null){if(this.currentFrame>this.currentEndFrame)this.nextSequence?this._goto(this.nextSequence):(this.paused=!0,this.currentFrame=this.currentEndFrame),this.callback&&this.callback(this)}else if(h=this.spriteSheet.totalFrames||
f*h,this.currentFrame>=h)this.spriteSheet.loop?this.currentFrame=0:(this.currentFrame=h-1,this.paused=!0),this.callback&&this.callback(this);this.currentFrame>=0&&a.drawImage(c,e*(this.currentFrame%f),d*(this.currentFrame/f|0),e,d,0,0,e,d);return!0};b.tick=function(){if(this.currentFrame==-1&&this.spriteSheet.frameData)this.paused=!0;this.paused||this.currentFrame++};b.gotoAndPlay=function(a){this.paused=!1;this._goto(a)};b.gotoAndStop=function(a){this.paused=!0;this._goto(a)};b.clone=function(){var a=
new c(this.spriteSheet);this.cloneProps(a);return a};b.toString=function(){return"[BitmapSequence (name="+this.name+")]"};b.DisplayObject_cloneProps=b.cloneProps;b.cloneProps=function(a){this.DisplayObject_cloneProps(a);a.callback=this.callback;a.currentFrame=this.currentFrame;a.currentStartFrame=this.currentStartFrame;a.currentEndFrame=this.currentEndFrame;a.currentSequence=this.currentSequence;a.nextSequence=this.nextSequence;a.paused=this.paused;a.frameData=this.frameData};b._goto=function(a){if(isNaN(a))if(a==
this.currentSequence)this.currentFrame=this.currentStartFrame;else{var b=this.spriteSheet.frameData[a];if(b instanceof Array){this.currentFrame=this.currentStartFrame=b[0];this.currentSequence=a;this.currentEndFrame=b[1];if(this.currentEndFrame==null)this.currentEndFrame=this.currentStartFrame;if(this.currentEndFrame==null)this.currentEndFrame=this.currentFrame;this.nextSequence=b[2];if(this.nextSequence==null)this.nextSequence=this.currentSequence;else if(this.nextSequence==!1)this.nextSequence=
null}else this.currentSequence=this.nextSequence=null,this.currentEndFrame=this.currentFrame=this.currentStartFrame=b}else this.currentSequence=this.nextSequence=this.currentEndFrame=null,this.currentStartFrame=0,this.currentFrame=a};q.BitmapSequence=c})(window);
(function(q){var c=function(a){this.initialize(a)},b=c.prototype=new DisplayObject;b.graphics=null;b.DisplayObject_initialize=b.initialize;b.initialize=function(a){this.DisplayObject_initialize();this.graphics=a?a:new Graphics};b.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.graphics};b.DisplayObject_draw=b.draw;b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;this.graphics.draw(a);return!0};b.clone=function(a){a=new c(a&&this.graphics?this.graphics.clone():
this.graphics);this.cloneProps(a);return a};b.toString=function(){return"[Shape (name="+this.name+")]"};q.Shape=c})(window);
(function(q){var c=function(a,b,c){this.initialize(a,b,c)},b=c.prototype=new DisplayObject;c._workingContext=document.createElement("canvas").getContext("2d");b.text="";b.font=null;b.color=null;b.textAlign=null;b.textBaseline=null;b.maxWidth=null;b.outline=!1;b.lineHeight=null;b.lineWidth=null;b.DisplayObject_initialize=b.initialize;b.initialize=function(a,b,c){this.DisplayObject_initialize();this.text=a;this.font=b;this.color=c?c:"#000"};b.isVisible=function(){return Boolean(this.visible&&this.alpha>
0&&this.scaleX!=0&&this.scaleY!=0&&this.text!=null&&this.text!="")};b.DisplayObject_draw=b.draw;b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;this.outline?a.strokeStyle=this.color:a.fillStyle=this.color;a.font=this.font;a.textAlign=this.textAlign?this.textAlign:"start";a.textBaseline=this.textBaseline?this.textBaseline:"alphabetic";for(var c=String(this.text).split(/(?:\r\n|\r|\n)/),e=this.lineHeight==null?this.getMeasuredLineHeight():this.lineHeight,d=0,f=0,h=c.length;f<h;f++){var n=
a.measureText(c[f]).width;if(this.lineWidth==null||n<this.lineWidth)this._drawTextLine(a,c[f],d);else{for(var n=c[f].split(/(\s)/),o=n[0],p=1,q=n.length;p<q;p+=2)a.measureText(o+n[p]+n[p+1]).width>this.lineWidth?(this._drawTextLine(a,o,d),d+=e,o=n[p+1]):o+=n[p]+n[p+1];this._drawTextLine(a,o,d)}d+=e}return!0};b.getMeasuredWidth=function(){return this._getWorkingContext().measureText(this.text).width};b.getMeasuredLineHeight=function(){return this._getWorkingContext().measureText("M").width*1.2};b.clone=
function(){var a=new c(this.text,this.font,this.color);this.cloneProps(a);return a};b.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"};b.DisplayObject_cloneProps=b.cloneProps;b.cloneProps=function(a){this.DisplayObject_cloneProps(a);a.textAlign=this.textAlign;a.textBaseline=this.textBaseline;a.maxWidth=this.maxWidth;a.outline=this.outline;a.lineHeight=this.lineHeight;a.lineWidth=this.lineWidth};b._getWorkingContext=function(){var a=c._workingContext;
a.font=this.font;a.textAlign=this.textAlign?this.textAlign:"start";a.textBaseline=this.textBaseline?this.textBaseline:"alphabetic";return a};b._drawTextLine=function(a,b,c){this.outline?a.strokeText(b,0,c,this.maxWidth):a.fillText(b,0,c,this.maxWidth)};q.Text=c})(window);
(function(q){var c=function(){throw"SpriteSheetUtils cannot be instantiated";};c._workingCanvas=document.createElement("canvas");c._workingContext=c._workingCanvas.getContext("2d");c.flip=function(b,a){var g=b.image,l=b.frameData,e=b.frameWidth,d=b.frameHeight,f=g.width/e|0,h=g.height/d|0,n=f*h,o={},p,q;for(q in l)p=l[q],p instanceof Array&&(p=p.slice(0)),o[q]=p;var t=[],u=0,s=0;for(q in a)if(p=a[q],p=l[p[0]],p!=null){if(p instanceof Array){var r=p[0],v=p[1];v==null&&(v=r)}else r=v=p;t[s]=q;t[s+1]=
r;t[s+2]=v;u+=v-r+1;s+=4}l=c._workingCanvas;l.width=g.width;l.height=Math.ceil(h+u/f)*d;u=c._workingContext;u.drawImage(g,0,0,f*e,h*d,0,0,f*e,h*d);h=n-1;for(s=0;s<t.length;s+=4){q=t[s];r=t[s+1];v=t[s+2];p=a[q];for(var n=p[1]?-1:1,y=p[2]?-1:1,A=n==-1?e:0,x=y==-1?d:0,z=r;z<=v;z++)h++,u.save(),u.translate(h%f*e+A,(h/f|0)*d+x),u.scale(n,y),u.drawImage(g,z%f*e,(z/f|0)*d,e,d,0,0,e,d),u.restore();o[q]=[h-(v-r),h,p[3]]}g=new Image;g.src=l.toDataURL("image/png");return new SpriteSheet(g.width>0?g:l,e,d,o)};
c.frameDataToString=function(b){var a="",c=0,l=0,e=0,d,f;for(f in b){e++;d=b[f];if(d instanceof Array){var h=d[0],n=d[1];n==null&&(n=h);d=d[2];d==null&&(d=f)}else h=n=d,d=f;a+="\n\t"+f+", start="+h+", end="+n+", next="+d;d==!1?a+=" (stop)":d==f&&(a+=" (loop)");n>c&&(c=n);h<l&&(l=h)}return e+" sequences, min="+l+", max="+c+a};c.extractFrame=function(b,a){var g=b.image,l=b.frameWidth,e=b.frameHeight,d=g.width/l|0;if(isNaN(a))var f=b.frameData[a],a=f instanceof Array?f[0]:f;f=c._workingCanvas;f.width=
l;f.height=e;c._workingContext.drawImage(g,a%d*l,(a/d|0)*e,l,e,0,0,l,e);g=new Image;g.src=f.toDataURL("image/png");return g};q.SpriteSheetUtils=c})(window);(function(q){var c=function(){throw"Touch cannot be instantiated";};c.isSupported=function(){return"ontouchstart"in q};c.enable=function(b){if(b!=null&&c.isSupported())b._primaryTouchId=-1,b._handleTouchMoveListener=null,b.canvas.addEventListener("touchstart",function(a){c._handleTouchStart(b,a)},!1),document.addEventListener("touchend",function(a){c._handleTouchEnd(b,a)},!1)};c._handleTouchStart=function(b,a){a.preventDefault();if(b._primaryTouchId==-1){b._handleTouchMoveListener=b._handleTouchMoveListener||
function(a){c._handleTouchMove(b,a)};document.addEventListener("touchmove",b._handleTouchMoveListener,!1);var g=a.changedTouches[0];b._primaryTouchId=g.identifier;b._updateMousePosition(g.pageX,g.pageY);b._handleMouseDown(g)}};c._handleTouchMove=function(b,a){var g=c._findPrimaryTouch(b,a.changedTouches);g&&b._handleMouseMove(g)};c._handleTouchEnd=function(b,a){var g=c._findPrimaryTouch(b,a.changedTouches);if(g)b._primaryTouchId=-1,b._handleMouseUp(g),document.removeEventListener("touchmove",b._handleTouchMoveListener),
b._handleTouchMoveListener=null};c._findPrimaryTouch=function(b,a){for(var c=a.length,l=0;l<c;l++){var e=a[l];if(e.identifier==b._primaryTouchId)return e}return null};q.Touch=c})(window);x$(window).on("load",function(){function q(){if(t)t.currentTime=0,t.play()}function c(){window.sickInt=setInterval(function(){sickTime+=1},1E3);q();window.sick=!0;window.skull.visible=!0;stage.update()}function b(){window.tamaFood-=1;window.foodText.text="\u2615"+a();a()}function a(){var a=window.tamaFood;return a<=100&&a>75?"\u2665\u2665\u2665\u2665":a<=75&&a>50?"\u2665\u2665\u2665\u2661":a<=50&&a>25?"\u2665\u2665\u2661\u2661":a<=25&&a>0?"\u2665\u2661\u2661\u2661":"\u2661\u2661\u2661\u2661"}function g(){var c=
new Graphics;c.beginFill("rgba(255,255,255,0.25)");c.drawCircle(0,0,r);statCirc=new Shape(c);statCirc.x=r/2*3.75;statCirc.y=r*1.5;statCirc.mouseEnabled=!0;stat=new Text("\u2603",r*2+"px Arial","#000");stat.x=r/2*2;stat.y=r*2;stat.name="stats";stat.mouseEnabled=!0;stat.onClick=function(){var b=(new Date).getTime()-window.tamaTime,b=Math.floor(Math.floor(b/1E3)/60),b="Name: "+window.tamaName+"\nGender: "+window.tamaGend+"\nAge: "+b+" minute"+(b===1?"":"s")+"\n\nHunger: "+a()+"\nCraps: "+window.matrix2s;
alert(b)};statCirc.onClick=stat.onClick;stage.addChild(statCirc);stage.addChild(stat);c=new Graphics;c.setStrokeStyle(1);c.beginFill("rgba(255,255,255,0.25)");c.drawCircle(0,0,r);feedCirc=new Shape(c);feedCirc.x=r/2*8.75;feedCirc.y=r*1.5;feedCirc.mouseEnabled=!0;feed=new Text("\u2615",r*2+"px Arial","#000");feed.x=r/2*7;feed.y=r*2;feed.name="food";feed.mouseEnabled=!0;feed.onClick=function(){window.tamaFood+=25;if(window.tamaFood>100)window.tamaFood=100;window.foodText.text="\u2615"+a()};feedCirc.onClick=
feed.onClick;stage.addChild(feedCirc);stage.addChild(feed);j=new Graphics;j.setStrokeStyle(1);j.beginFill("rgba(255,255,255,0.25)");j.drawCircle(0,0,r);crapCirc=new Shape(j);crapCirc.x=r/2*13.75;crapCirc.y=r*1.5;crapCirc.mouseEnabled=!0;crap=new Text("\u2668",r*2+"px Arial","#000");crap.x=r/2*12;crap.y=r*2;crap.name="matrix 2";crap.mouseEnabled=!0;crap.onClick=function(){d()};crapCirc.onClick=crap.onClick;stage.addChild(crapCirc);stage.addChild(crap);k=new Graphics;k.setStrokeStyle(1);k.beginFill("rgba(255,255,255,0.25)");
k.drawCircle(0,0,r);pausCirc=new Shape(k);pausCirc.x=canvas.width-r*1.25;pausCirc.y=r*1.25;pausCirc.mouseEnabled=!0;pause=new Text("\u275a\u275a",r+"px Arial","#000");pause.x=canvas.width-r*2;pause.y=r*1.5;pause.name="play/pause";pause.mouseEnabled=!0;pause.onClick=function(){v?(pause.text="\u275a\u275a",pause.x=canvas.width-r*2,stage.update(),n=!0,window.hungryInt=setInterval(b,u),window.matrixInt=setInterval(e,s),v=!1):(pause.text="\u25b6",pause.x=canvas.width-r*1.5,stage.update(),n=!1,clearInterval(window.hungryInt),
clearInterval(window.matrixInt),v=!0)};pausCirc.onClick=pause.onClick;stage.addChild(pausCirc);stage.addChild(pause);m=new Graphics;m.setStrokeStyle(1);m.beginFill("rgba(255,255,255,0.25)");m.drawCircle(0,0,r);healCirc=new Shape(m);healCirc.x=r/2*18.75;healCirc.y=r*1.5;healCirc.mouseEnabled=!0;heal=new Text("\u211e",r*2+"px Arial","#000");heal.x=r/2*17.5;heal.y=r*2;heal.name="heal";heal.mouseEnabled=!0;heal.onClick=function(){clearInterval(window.sickInt);sickTime=0;window.sick=!1;d();window.skull.visible=
!1};healCirc.onClick=heal.onClick;stage.addChild(healCirc);stage.addChild(heal)}function l(){var a=new Container;window.stage.addChild(a);window.bit=new Bitmap(window.tama);a.addChild(bit);bit.x=$("#canvas")[0].width/2;bit.y=$("#canvas")[0].height/2;bit.name="tamaBit";bit.snapToPixel=!1;bit.scaleX=bit.scaleY=0.5;bit.regX=bit.image.width/2|0;bit.regY=bit.image.height/2|0;g();Ticker.setFPS(12);Ticker.addListener(window)}function e(){window.matrix2s+=1;window.crapTxt.text="\u2668"+window.matrix2s;q()}
function d(){window.matrix2s=0;window.crapTxt.text="\u26680"}function f(){var c=["\u2642","\u2640"],d=Math.floor(Math.random()*c.length),f=localStorage;window.tamaGend=f.tamaGend||c[d];window.tamaName=f.tamaName||prompt("Enter a name.\n(Hint: It's "+window.tamaGend.toLowerCase()+")")||"Derpo";c=new Date;window.tamaTime=f.tamaTime||c.getTime();window.tamaFood=parseInt(f.tamaFood)||50;window.hungryInt=setInterval(b,u);window.matrix2s=parseInt(f.tamaCrap)||0;window.matrixInt=setInterval(e,s);window.sickTime=
parseInt(f.tamaSickTime)||0;canvas=$("#canvas")[0];window.stage=new Stage(canvas);stage.enableMouseOver(10);window.tama=new Image;tama.onload=l;tama.onerror=function(){console.log("Oh God... Something has gone terribly, terribly wrong... Augh!\n4,200 saved, no survivors.\nYeah, so now it's a PNG.");tama.src="./Images/Mametchi.png"};tama.src="./Images/Webetchi.svg";window.crapTxt=new Text("\u2668"+window.matrix2s,"18px Arial","#000");crapTxt.x=canvas.width-crapTxt.getMeasuredWidth()-2;crapTxt.y=canvas.height-
crapTxt.getMeasuredLineHeight()/3;stage.addChild(crapTxt);window.foodText=new Text("\u2615"+a(),"18px Arial","#000");foodText.x=2;foodText.y=canvas.height-foodText.getMeasuredLineHeight()/3;stage.addChild(foodText);window.skull=new Text("\u2620","18px Arial","#000");skull.x=canvas.width/2;skull.y=canvas.height-skull.getMeasuredLineHeight()/3;skull.visible=!1;stage.addChild(skull)}window.$=x$;if(!console)window.console={log:function(){}};Touch.isSupported()&&Touch.enable(window.stage);var h=[1,1],
n=!0,o=!1,p=!1,w=!0;window.tick=function(){var a=(new Date("October 13, 1975 08:59:00")).getHours(),d=bit.image.width/2*bit.scaleX,g=bit.image.height/2*bit.scaleY;if(window.bit.x+d>canvas.width||window.bit.x-d<0)h[0]=-h[0];if(window.bit.y+g>canvas.height-r*2+8||window.bit.y-g<r*2.5)h[1]=-h[1];localStorage.setItem("tamaGend",window.tamaGend);localStorage.setItem("tamaName",window.tamaName);localStorage.setItem("tamaTime",window.tamaTime);localStorage.setItem("tamaFood",window.tamaFood);localStorage.setItem("tamaCrap",
window.matrix2s);localStorage.setItem("tamaSickTime",window.sickTime);window.matrix2s>2&&!window.sick&&c();if((window.tamaFood<=0||window.matrix2s>=9||window.sickTime>=5400)&&!o){alert("Your dude died, bud.");n=!1;window.tamaFood=0;clearInterval(window.hungryInt);clearInterval(window.matrixInt);o=!0;localStorage.removeItem("tamaGend");localStorage.removeItem("tamaName");localStorage.removeItem("tamaTime");localStorage.removeItem("tamaFood");localStorage.removeItem("tamaCrap");localStorage.removeItem("tamaSickTime");
n=!0;o=!1;stage.clear();stage.visible=!1;for(i in stage.children)stage.children[i].mouseEnabled=!1;f()}else window.tamaFood<=25&&!p?(p=!0,q()):window.tamaFood>25&&p&&(p=!1);if(w){if(w&&(a>=21||a<8))w=!1,clearInterval(window.hungryInt),clearInterval(window.matrixInt),window.sleepCover=new Shape,sleepCover.graphics.beginFill("#333").drawRect(0,0,canvas.width,canvas.height),sleepCover.x=0,sleepCover.y=0,stage.addChild(sleepCover),window.sleepTxt=new Text("ZZZ...",r*2+"px Arial","#EEE"),sleepTxt.x=canvas.width/
2-sleepTxt.getMeasuredWidth()/2,sleepTxt.y=canvas.height/2,sleepTxt.rotation=10,stage.addChild(sleepTxt),stage.upfdate()}else if(a<21&&a>=8)w=!0,window.hungryInt=setInterval(b,u),window.matrixInt=setInterval(e,s),stage.removeChild(sleepCover),stage.removeChild(sleepTxt);n&&w&&(window.bit.x+=h[0],window.bit.y+=h[1],stage.update())};if(document.createElement("audio").canPlayType)var t=new Audio("http://home.freeuk.net/soundstuff/sounds/wavs1/beep-once-ver1.wav");var u=144E3,s=27E5,r=14,v=!1;$("html").on("keydown",
function(a){if(a.which===83&&a.ctrlKey&&a.altKey){a.preventDefault();a.stopPropagation();for(var b,a=0;b=document.getElementsByTagName("link")[a];a++)if(b.getAttribute("rel").indexOf("style")!=-1&&b.getAttribute("title")&&(b.disabled=!0,b.getAttribute("title")=="Steampunk"))b.disabled=!1}});f()});